{"ast":null,"code":"var _jsxFileName = \"D:\\\\Front End\\\\ReactJS\\\\thien dang\\\\client\\\\src\\\\pages\\\\OrderPage\\\\index.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Col, Row } from \"antd\";\nimport * as Yup from \"yup\";\nimport \"./style.scss\";\nimport { Button } from \"antd/es\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { useForm } from \"react-hook-form\";\nimport { actAddOrder, clearOrder } from \"../../redux/features/order/orderSlice\";\nimport dayjs from \"dayjs\";\nimport { makeOrderNumber } from \"../../utils/makeOrderNumber\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ROUTES } from \"../../constants/routes\";\nimport BillingDetails from \"../../components/BillingDetails\";\nimport YourOrder from \"../../components/YourOrder\";\nimport { actAddBill } from \"../../redux/features/payment/paymentSlice\";\nimport { actClearCarts } from \"../../redux/features/cart/cartSlice\";\nimport { formatNumber } from \"../../utils/formatNumber\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst phoneValidation = /(84|0[3|5|7|8|9])+([0-9]{8})\\b/;\nconst emailValidation = /^[a-z][a-z0-9_.]{5,32}@[a-z0-9]{2,}(.[a-z0-9]{2,4}){1,2}$/;\nconst schema = Yup.object().shape({\n  fullName: Yup.string().required(\"Please input your full name\"),\n  address: Yup.string().required(\"Please input street address\"),\n  phoneNumber: Yup.string().required(\"Please input your phone number\").matches(phoneValidation, \"type phone number was wrong\"),\n  email: Yup.string().required(\"Please input your email\").matches(emailValidation, \"type email was wrong\"),\n  feeShip: Yup.string().required(\"Please choose method shipping\"),\n  payment: Yup.string().required(\"Please choose method shipping\")\n});\nconst OrderPage = () => {\n  _s();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {\n    userInfo\n  } = useSelector(state => state.user);\n  const {\n    carts\n  } = useSelector(state => state.cart);\n  const methods = useForm({\n    defaultValues: {\n      fullName: \"\",\n      address: \"\",\n      phoneNumber: \"\",\n      email: \"\",\n      orderNotes: \"\",\n      feeShip: \"\",\n      payment: \"\"\n    },\n    resolver: yupResolver(schema)\n  });\n  const {\n    handleSubmit,\n    control,\n    formState: {\n      errors\n    },\n    reset\n  } = methods;\n  const onValid = formValue => {\n    const _totalMoney = carts.reduce((total, cart) => {\n      return total + parseFloat(cart.price) * parseFloat(cart.quantity);\n    }, 0);\n    const orderData = {\n      ...formValue,\n      userId: userInfo.id,\n      carts: carts,\n      dateOfBill: dayjs(new Date()).format(\"DD/MM/YYYY\"),\n      createAt: new Date().getTime(),\n      orderNumber: makeOrderNumber(),\n      totalMoney: formatNumber(_totalMoney)\n    };\n    dispatch(actAddOrder(orderData));\n    dispatch(actAddBill(orderData));\n    dispatch(clearOrder());\n    navigate(ROUTES.PAYMENT_PAGE);\n    dispatch(actClearCarts());\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"order-page-container\",\n    onSubmit: handleSubmit(onValid),\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"order-page\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        className: \"order-page__billing-details\",\n        xs: 24,\n        sm: 24,\n        md: 12,\n        lg: 14,\n        children: /*#__PURE__*/_jsxDEV(BillingDetails, {\n          control: control,\n          errors: errors,\n          reset: reset\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"order-page__your-order\",\n        xs: 24,\n        sm: 24,\n        md: 12,\n        lg: 10,\n        children: [/*#__PURE__*/_jsxDEV(YourOrder, {\n          control: control,\n          errors: errors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"billing-detail__submit-btn\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            htmlType: \"submit\",\n            children: \"Thanh to\\xE1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderPage, \"evMuSiSgr1/OPzSSpzAKgJULNFY=\", false, function () {\n  return [useDispatch, useNavigate, useSelector, useSelector, useForm];\n});\n_c = OrderPage;\nexport default OrderPage;\nvar _c;\n$RefreshReg$(_c, \"OrderPage\");","map":{"version":3,"names":["React","Col","Row","Yup","Button","yupResolver","useForm","actAddOrder","clearOrder","dayjs","makeOrderNumber","useDispatch","useSelector","useNavigate","ROUTES","BillingDetails","YourOrder","actAddBill","actClearCarts","formatNumber","jsxDEV","_jsxDEV","phoneValidation","emailValidation","schema","object","shape","fullName","string","required","address","phoneNumber","matches","email","feeShip","payment","OrderPage","_s","dispatch","navigate","userInfo","state","user","carts","cart","methods","defaultValues","orderNotes","resolver","handleSubmit","control","formState","errors","reset","onValid","formValue","_totalMoney","reduce","total","parseFloat","price","quantity","orderData","userId","id","dateOfBill","Date","format","createAt","getTime","orderNumber","totalMoney","PAYMENT_PAGE","className","onSubmit","children","xs","sm","md","lg","fileName","_jsxFileName","lineNumber","columnNumber","htmlType","_c","$RefreshReg$"],"sources":["D:/Front End/ReactJS/thien dang/client/src/pages/OrderPage/index.jsx"],"sourcesContent":["import React from \"react\";\nimport { Col, Row } from \"antd\";\nimport * as Yup from \"yup\";\nimport \"./style.scss\";\nimport { Button } from \"antd/es\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { useForm } from \"react-hook-form\";\nimport { actAddOrder, clearOrder } from \"../../redux/features/order/orderSlice\";\nimport dayjs from \"dayjs\";\nimport { makeOrderNumber } from \"../../utils/makeOrderNumber\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ROUTES } from \"../../constants/routes\";\nimport BillingDetails from \"../../components/BillingDetails\";\nimport YourOrder from \"../../components/YourOrder\";\nimport { actAddBill } from \"../../redux/features/payment/paymentSlice\";\nimport { actClearCarts } from \"../../redux/features/cart/cartSlice\";\nimport { formatNumber } from \"../../utils/formatNumber\";\n\nconst phoneValidation = /(84|0[3|5|7|8|9])+([0-9]{8})\\b/;\nconst emailValidation =\n  /^[a-z][a-z0-9_.]{5,32}@[a-z0-9]{2,}(.[a-z0-9]{2,4}){1,2}$/;\nconst schema = Yup.object().shape({\n  fullName: Yup.string().required(\"Please input your full name\"),\n  address: Yup.string().required(\"Please input street address\"),\n  phoneNumber: Yup.string()\n    .required(\"Please input your phone number\")\n    .matches(phoneValidation, \"type phone number was wrong\"),\n  email: Yup.string()\n    .required(\"Please input your email\")\n    .matches(emailValidation, \"type email was wrong\"),\n  feeShip: Yup.string().required(\"Please choose method shipping\"),\n  payment: Yup.string().required(\"Please choose method shipping\"),\n});\n\nconst OrderPage = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const { userInfo } = useSelector((state) => state.user);\n  const { carts } = useSelector((state) => state.cart);\n\n  const methods = useForm({\n    defaultValues: {\n      fullName: \"\",\n      address: \"\",\n      phoneNumber: \"\",\n      email: \"\",\n      orderNotes: \"\",\n      feeShip: \"\",\n      payment: \"\",\n    },\n    resolver: yupResolver(schema),\n  });\n\n  const {\n    handleSubmit,\n    control,\n    formState: { errors },\n    reset,\n  } = methods;\n\n  const onValid = (formValue) => {\n    const _totalMoney = carts.reduce((total, cart) => {\n      return total + parseFloat(cart.price) * parseFloat(cart.quantity);\n    }, 0);\n\n    const orderData = {\n      ...formValue,\n      userId: userInfo.id,\n      carts: carts,\n      dateOfBill: dayjs(new Date()).format(\"DD/MM/YYYY\"),\n      createAt: new Date().getTime(),\n      orderNumber: makeOrderNumber(),\n      totalMoney: formatNumber(_totalMoney),\n    };\n    dispatch(actAddOrder(orderData));\n    dispatch(actAddBill(orderData));\n    dispatch(clearOrder());\n    navigate(ROUTES.PAYMENT_PAGE);\n    dispatch(actClearCarts())\n  };\n\n  return (\n    <form className=\"order-page-container\" onSubmit={handleSubmit(onValid)}>\n      <Row className=\"order-page\">\n        <Col\n          className=\"order-page__billing-details\"\n          xs={24}\n          sm={24}\n          md={12}\n          lg={14}\n        >\n          <BillingDetails control={control} errors={errors} reset={reset} />\n        </Col>\n        <Col className=\"order-page__your-order\" xs={24} sm={24} md={12} lg={10}>\n          <YourOrder control={control} errors={errors} />\n          <div className=\"billing-detail__submit-btn\">\n            <Button htmlType=\"submit\">Thanh to√°n</Button>\n          </div>\n        </Col>\n      </Row>\n    </form>\n  );\n};\n\nexport default OrderPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}