{"ast":null,"code":"import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import{commentApis}from\"../../../apis/commentApis\";import{message}from\"antd\";const initialState={isLoading:false,errors:{},comments:[],commentsCalcuStarAverage:[],comment:{},pagination:{currentPage:1,limitPerPage:5,total:25}};export const actFetchAllComments=createAsyncThunk(\"comment/fetchAllComments\",async function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const response=await commentApis.getAllComments(params);return{data:response.data,total:response.headers.get(\"X-Total-Count\")};});export const actFetchAllCommentsCalcuStarAverage=createAsyncThunk(\"comment/fetchAllCommentsCalcuStarAverage\",async function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const response=await commentApis.getAllComments(params);return response.data;});export const actAddComment=createAsyncThunk(\"comment/addComment\",async comment=>{const response=await commentApis.addComment(comment);return response;});export const actFetchCommentById=createAsyncThunk(\"comment/fetchCommentById\",async id=>{const response=await commentApis.getCommentById(id);console.log(response,\"fetch comment by id\");return response.data;});export const actEditCommentById=createAsyncThunk(\"comment/editCommentById\",async _ref=>{let{id,commentUpdate}=_ref;const response=await commentApis.editCommentById(id,commentUpdate);return response;});const commentSlice=createSlice({name:\"comment\",initialState:initialState,reducers:{setNewPage:(state,action)=>{state.pagination={...state.pagination,currentPage:action.payload};}},extraReducers:builder=>{builder.addCase(actFetchAllComments.pending,(state,action)=>{state.isLoading=true;});builder.addCase(actFetchAllComments.rejected,(state,action)=>{state.isLoading=false;state.errors={};});builder.addCase(actFetchAllComments.fulfilled,(state,action)=>{state.isLoading=false;state.comments=action.payload.data;state.pagination.total=action.payload.total;});builder.addCase(actFetchAllCommentsCalcuStarAverage.fulfilled,(state,action)=>{state.isLoading=false;state.commentsCalcuStarAverage=action.payload;});builder.addCase(actAddComment.pending,(state,action)=>{state.isLoading=true;});builder.addCase(actAddComment.rejected,(state,action)=>{state.isLoading=false;state.errors={};message.error(\"add review product failure!\");});builder.addCase(actAddComment.fulfilled,(state,action)=>{state.isLoading=false;state.comment=action.payload;state.comments.push(action.payload);state.commentsCalcuStarAverage.push(action.payload);message.success(\"Đánh giá sản phẩm thành công!\");});builder.addCase(actEditCommentById.pending,(state,action)=>{state.isLoading=true;});builder.addCase(actEditCommentById.rejected,(state,action)=>{state.isLoading=false;state.errors={};message.error(\"update review product failure!\");});builder.addCase(actEditCommentById.fulfilled,(state,action)=>{console.log(action.payload,\"edit comment fulfilled ne\");message.success(\"update review product success!\");});}});export const{setNewPage}=commentSlice.actions;export const commentReducer=commentSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","commentApis","message","initialState","isLoading","errors","comments","commentsCalcuStarAverage","comment","pagination","currentPage","limitPerPage","total","actFetchAllComments","params","arguments","length","undefined","response","getAllComments","data","headers","get","actFetchAllCommentsCalcuStarAverage","actAddComment","addComment","actFetchCommentById","id","getCommentById","console","log","actEditCommentById","_ref","commentUpdate","editCommentById","commentSlice","name","reducers","setNewPage","state","action","payload","extraReducers","builder","addCase","pending","rejected","fulfilled","error","push","success","actions","commentReducer","reducer"],"sources":["D:/Front End/ReactJS/thien dang/client/src/redux/features/comment/commentSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { commentApis } from \"../../../apis/commentApis\";\nimport { message } from \"antd\";\n\nconst initialState = {\n  isLoading: false,\n  errors: {},\n  comments: [],\n  commentsCalcuStarAverage: [],\n  comment: {},\n  pagination: {\n    currentPage: 1,\n    limitPerPage: 5,\n    total: 25,\n  },\n};\n\nexport const actFetchAllComments = createAsyncThunk(\n  \"comment/fetchAllComments\",\n  async (params = {}) => {\n    const response = await commentApis.getAllComments(params);\n    return {\n      data: response.data,\n      total: response.headers.get(\"X-Total-Count\"),\n    };\n  }\n);\n\nexport const actFetchAllCommentsCalcuStarAverage = createAsyncThunk(\n  \"comment/fetchAllCommentsCalcuStarAverage\",\n  async (params = {}) => {\n    const response = await commentApis.getAllComments(params);\n    return response.data;\n  }\n);\n\nexport const actAddComment = createAsyncThunk(\n  \"comment/addComment\",\n  async (comment) => {\n    const response = await commentApis.addComment(comment);\n    return response;\n  }\n);\n\nexport const actFetchCommentById = createAsyncThunk(\n  \"comment/fetchCommentById\",\n  async (id) => {\n    const response = await commentApis.getCommentById(id);\n    console.log(response, \"fetch comment by id\");\n    return response.data;\n  }\n);\n\nexport const actEditCommentById = createAsyncThunk(\n  \"comment/editCommentById\",\n  async ({ id, commentUpdate }) => {\n    const response = await commentApis.editCommentById(id, commentUpdate);\n    return response;\n  }\n);\n\nconst commentSlice = createSlice({\n  name: \"comment\",\n  initialState: initialState,\n  reducers: {\n    setNewPage: (state, action) => {\n      state.pagination = {\n        ...state.pagination,\n        currentPage: action.payload,\n      };\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(actFetchAllComments.pending, (state, action) => {\n      state.isLoading = true;\n    });\n    builder.addCase(actFetchAllComments.rejected, (state, action) => {\n      state.isLoading = false;\n      state.errors = {};\n    });\n    builder.addCase(actFetchAllComments.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.comments = action.payload.data;\n      state.pagination.total = action.payload.total;\n    });\n\n    builder.addCase(\n      actFetchAllCommentsCalcuStarAverage.fulfilled,\n      (state, action) => {\n        state.isLoading = false;\n        state.commentsCalcuStarAverage = action.payload;\n      }\n    );\n\n    builder.addCase(actAddComment.pending, (state, action) => {\n      state.isLoading = true;\n    });\n    builder.addCase(actAddComment.rejected, (state, action) => {\n      state.isLoading = false;\n      state.errors = {};\n      message.error(\"add review product failure!\");\n    });\n    builder.addCase(actAddComment.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.comment = action.payload;\n      state.comments.push(action.payload);\n      state.commentsCalcuStarAverage.push(action.payload);\n      message.success(\"Đánh giá sản phẩm thành công!\");\n    });\n\n    builder.addCase(actEditCommentById.pending, (state, action) => {\n      state.isLoading = true;\n    });\n    builder.addCase(actEditCommentById.rejected, (state, action) => {\n      state.isLoading = false;\n      state.errors = {};\n      message.error(\"update review product failure!\");\n    });\n    builder.addCase(actEditCommentById.fulfilled, (state, action) => {\n      console.log(action.payload, \"edit comment fulfilled ne\");\n      message.success(\"update review product success!\");\n    });\n  },\n});\n\nexport const { setNewPage } = commentSlice.actions;\nexport const commentReducer = commentSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}