{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setSearchKey}from\"../../redux/features/product/productSlice\";import{Input}from\"antd\";import'./style.scss';import{CloseCircleOutlined}from\"@ant-design/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";const PostFilterForm=_ref=>{let{onSubmit}=_ref;const dispatch=useDispatch();const searchKey=useSelector(state=>state.product.searchKey);const[searchTerm,setSearchTerm]=useState(searchKey);const typingTimeOutRef=useRef(null);const handleSearchTermChange=event=>{setSearchTerm(event.target.value);};const handleClear=()=>{setSearchTerm(\"\");dispatch(setSearchKey(\"\"));if(onSubmit){onSubmit({searchTerm:\"\"});}};useEffect(()=>{if(!onSubmit)return;if(typingTimeOutRef.current){clearTimeout(typingTimeOutRef.current);}typingTimeOutRef.current=setTimeout(()=>{dispatch(setSearchKey(searchTerm));const formValues={searchTerm:searchTerm};onSubmit(formValues);},500);return()=>{clearTimeout(typingTimeOutRef.current);};},[searchTerm,dispatch,onSubmit]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"form\",{className:\"input-search\",children:/*#__PURE__*/_jsx(Input,{type:\"search\",placeholder:\"T\\xECm ki\\u1EBFm\",value:searchTerm,onChange:handleSearchTermChange,suffix:/*#__PURE__*/_jsx(CloseCircleOutlined,{onClick:handleClear,style:{color:'rgba(0,0,0,.45)',cursor:'pointer'}})})})});};PostFilterForm.defaultProps={onSubmit:null};export default PostFilterForm;","map":{"version":3,"names":["React","useEffect","useRef","useState","useDispatch","useSelector","setSearchKey","Input","CloseCircleOutlined","jsx","_jsx","PostFilterForm","_ref","onSubmit","dispatch","searchKey","state","product","searchTerm","setSearchTerm","typingTimeOutRef","handleSearchTermChange","event","target","value","handleClear","current","clearTimeout","setTimeout","formValues","children","className","type","placeholder","onChange","suffix","onClick","style","color","cursor","defaultProps"],"sources":["D:/Front End/ReactJS/thien dang/client/src/components/PostFilterForm/index.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setSearchKey } from \"../../redux/features/product/productSlice\";\r\nimport { Input } from \"antd\";\r\nimport './style.scss'\r\nimport { CloseCircleOutlined } from \"@ant-design/icons\";\r\n\r\nconst PostFilterForm = ({ onSubmit }) => {\r\n    const dispatch = useDispatch();\r\n    const searchKey = useSelector(state => state.product.searchKey);\r\n    const [searchTerm, setSearchTerm] = useState(searchKey);\r\n    const typingTimeOutRef = useRef(null);\r\n\r\n    const handleSearchTermChange = (event) => {\r\n        setSearchTerm(event.target.value);\r\n    };\r\n    const handleClear = () => {\r\n        setSearchTerm(\"\");\r\n        dispatch(setSearchKey(\"\"));\r\n\r\n        if (onSubmit) {\r\n            onSubmit({ searchTerm: \"\" });\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        if (!onSubmit) return;\r\n\r\n        if (typingTimeOutRef.current) {\r\n            clearTimeout(typingTimeOutRef.current);\r\n        }\r\n\r\n        typingTimeOutRef.current = setTimeout(() => {\r\n            dispatch(setSearchKey(searchTerm));\r\n\r\n            const formValues = {\r\n                searchTerm: searchTerm,\r\n            };\r\n            onSubmit(formValues);\r\n        }, 500);\r\n\r\n        return () => {\r\n            clearTimeout(typingTimeOutRef.current);\r\n        };\r\n    }, [searchTerm, dispatch, onSubmit]);\r\n\r\n    return (\r\n        <div>\r\n            <form className=\"input-search\">\r\n                <Input\r\n                    type=\"search\"\r\n                    placeholder=\"Tìm kiếm\"\r\n                    value={searchTerm}\r\n                    onChange={handleSearchTermChange}\r\n                    suffix={<CloseCircleOutlined onClick={handleClear} style={{ color: 'rgba(0,0,0,.45)', cursor: 'pointer' }} />}\r\n                />\r\n            </form>\r\n            {/* <div className=\"result-search\">\r\n                {searchTerm.map((d, i) => (\r\n                    <div key={i}>\r\n                        {d.name}\r\n                    </div>\r\n                ))}\r\n            </div> */}\r\n        </div>\r\n\r\n\r\n    );\r\n};\r\n\r\nPostFilterForm.propTypes = {\r\n    onSubmit: PropTypes.func,\r\n};\r\n\r\nPostFilterForm.defaultProps = {\r\n    onSubmit: null,\r\n};\r\n\r\nexport default PostFilterForm;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAE1D,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,YAAY,KAAQ,2CAA2C,CACxE,OAASC,KAAK,KAAQ,MAAM,CAC5B,MAAO,cAAc,CACrB,OAASC,mBAAmB,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAChC,KAAM,CAAAE,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAW,SAAS,CAAGV,WAAW,CAACW,KAAK,EAAIA,KAAK,CAACC,OAAO,CAACF,SAAS,CAAC,CAC/D,KAAM,CAACG,UAAU,CAAEC,aAAa,CAAC,CAAGhB,QAAQ,CAACY,SAAS,CAAC,CACvD,KAAM,CAAAK,gBAAgB,CAAGlB,MAAM,CAAC,IAAI,CAAC,CAErC,KAAM,CAAAmB,sBAAsB,CAAIC,KAAK,EAAK,CACtCH,aAAa,CAACG,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACrC,CAAC,CACD,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACtBN,aAAa,CAAC,EAAE,CAAC,CACjBL,QAAQ,CAACR,YAAY,CAAC,EAAE,CAAC,CAAC,CAE1B,GAAIO,QAAQ,CAAE,CACVA,QAAQ,CAAC,CAAEK,UAAU,CAAE,EAAG,CAAC,CAAC,CAChC,CACJ,CAAC,CACDjB,SAAS,CAAC,IAAM,CACZ,GAAI,CAACY,QAAQ,CAAE,OAEf,GAAIO,gBAAgB,CAACM,OAAO,CAAE,CAC1BC,YAAY,CAACP,gBAAgB,CAACM,OAAO,CAAC,CAC1C,CAEAN,gBAAgB,CAACM,OAAO,CAAGE,UAAU,CAAC,IAAM,CACxCd,QAAQ,CAACR,YAAY,CAACY,UAAU,CAAC,CAAC,CAElC,KAAM,CAAAW,UAAU,CAAG,CACfX,UAAU,CAAEA,UAChB,CAAC,CACDL,QAAQ,CAACgB,UAAU,CAAC,CACxB,CAAC,CAAE,GAAG,CAAC,CAEP,MAAO,IAAM,CACTF,YAAY,CAACP,gBAAgB,CAACM,OAAO,CAAC,CAC1C,CAAC,CACL,CAAC,CAAE,CAACR,UAAU,CAAEJ,QAAQ,CAAED,QAAQ,CAAC,CAAC,CAEpC,mBACIH,IAAA,QAAAoB,QAAA,cACIpB,IAAA,SAAMqB,SAAS,CAAC,cAAc,CAAAD,QAAA,cAC1BpB,IAAA,CAACH,KAAK,EACFyB,IAAI,CAAC,QAAQ,CACbC,WAAW,CAAC,kBAAU,CACtBT,KAAK,CAAEN,UAAW,CAClBgB,QAAQ,CAAEb,sBAAuB,CACjCc,MAAM,cAAEzB,IAAA,CAACF,mBAAmB,EAAC4B,OAAO,CAAEX,WAAY,CAACY,KAAK,CAAE,CAAEC,KAAK,CAAE,iBAAiB,CAAEC,MAAM,CAAE,SAAU,CAAE,CAAE,CAAE,CACjH,CAAC,CACA,CAAC,CAQN,CAAC,CAId,CAAC,CAMD5B,cAAc,CAAC6B,YAAY,CAAG,CAC1B3B,QAAQ,CAAE,IACd,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}