{"ast":null,"code":"import React from\"react\";import{Col,Row}from\"antd\";import*as Yup from\"yup\";import\"./style.scss\";import{Button}from\"antd/es\";import{yupResolver}from\"@hookform/resolvers/yup\";import{useForm}from\"react-hook-form\";import{actAddOrder,clearOrder}from\"../../redux/features/order/orderSlice\";import dayjs from\"dayjs\";import{makeOrderNumber}from\"../../utils/makeOrderNumber\";import{useDispatch,useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{ROUTES}from\"../../constants/routes\";import BillingDetails from\"../../components/BillingDetails\";import YourOrder from\"../../components/YourOrder\";import{actAddBill}from\"../../redux/features/payment/paymentSlice\";import{actClearCarts}from\"../../redux/features/cart/cartSlice\";import{formatNumber}from\"../../utils/formatNumber\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const phoneValidation=/(84|0[3|5|7|8|9])+([0-9]{8})\\b/;const emailValidation=/^[a-z][a-z0-9_.]{5,32}@[a-z0-9]{2,}(.[a-z0-9]{2,4}){1,2}$/;const schema=Yup.object().shape({fullName:Yup.string().required(\"Please input your full name\"),address:Yup.string().required(\"Please input street address\"),phoneNumber:Yup.string().required(\"Please input your phone number\").matches(phoneValidation,\"type phone number was wrong\"),email:Yup.string().required(\"Please input your email\").matches(emailValidation,\"type email was wrong\"),feeShip:Yup.string().required(\"Please choose method shipping\"),payment:Yup.string().required(\"Please choose method shipping\")});const OrderPage=()=>{const dispatch=useDispatch();const navigate=useNavigate();const{userInfo}=useSelector(state=>state.user);const{carts}=useSelector(state=>state.cart);const methods=useForm({defaultValues:{fullName:\"\",address:\"\",phoneNumber:\"\",email:\"\",orderNotes:\"\",feeShip:\"\",payment:\"\"},resolver:yupResolver(schema)});const{handleSubmit,control,formState:{errors},reset}=methods;const onValid=formValue=>{const _totalMoney=carts.reduce((total,cart)=>{return total+parseFloat(cart.price)*parseFloat(cart.quantity);},0);const orderData={...formValue,userId:userInfo.id,carts:carts,dateOfBill:dayjs(new Date()).format(\"DD/MM/YYYY\"),createAt:new Date().getTime(),orderNumber:makeOrderNumber(),totalMoney:formatNumber(_totalMoney)};dispatch(actAddOrder(orderData));dispatch(actAddBill(orderData));dispatch(clearOrder());navigate(ROUTES.PAYMENT_PAGE);dispatch(actClearCarts());};return/*#__PURE__*/_jsx(\"form\",{className:\"order-page-container\",onSubmit:handleSubmit(onValid),children:/*#__PURE__*/_jsxs(Row,{className:\"order-page\",children:[/*#__PURE__*/_jsx(Col,{className:\"order-page__billing-details\",xs:24,sm:24,md:12,lg:14,children:/*#__PURE__*/_jsx(BillingDetails,{control:control,errors:errors,reset:reset})}),/*#__PURE__*/_jsxs(Col,{className:\"order-page__your-order\",xs:24,sm:24,md:12,lg:10,children:[/*#__PURE__*/_jsx(YourOrder,{control:control,errors:errors}),/*#__PURE__*/_jsx(\"div\",{className:\"billing-detail__submit-btn\",children:/*#__PURE__*/_jsx(Button,{htmlType:\"submit\",children:\"Thanh to\\xE1n\"})})]})]})});};export default OrderPage;","map":{"version":3,"names":["React","Col","Row","Yup","Button","yupResolver","useForm","actAddOrder","clearOrder","dayjs","makeOrderNumber","useDispatch","useSelector","useNavigate","ROUTES","BillingDetails","YourOrder","actAddBill","actClearCarts","formatNumber","jsx","_jsx","jsxs","_jsxs","phoneValidation","emailValidation","schema","object","shape","fullName","string","required","address","phoneNumber","matches","email","feeShip","payment","OrderPage","dispatch","navigate","userInfo","state","user","carts","cart","methods","defaultValues","orderNotes","resolver","handleSubmit","control","formState","errors","reset","onValid","formValue","_totalMoney","reduce","total","parseFloat","price","quantity","orderData","userId","id","dateOfBill","Date","format","createAt","getTime","orderNumber","totalMoney","PAYMENT_PAGE","className","onSubmit","children","xs","sm","md","lg","htmlType"],"sources":["D:/Front End/ReactJS/thien dang/client/src/pages/OrderPage/index.jsx"],"sourcesContent":["import React from \"react\";\nimport { Col, Row } from \"antd\";\nimport * as Yup from \"yup\";\nimport \"./style.scss\";\nimport { Button } from \"antd/es\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { useForm } from \"react-hook-form\";\nimport { actAddOrder, clearOrder } from \"../../redux/features/order/orderSlice\";\nimport dayjs from \"dayjs\";\nimport { makeOrderNumber } from \"../../utils/makeOrderNumber\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ROUTES } from \"../../constants/routes\";\nimport BillingDetails from \"../../components/BillingDetails\";\nimport YourOrder from \"../../components/YourOrder\";\nimport { actAddBill } from \"../../redux/features/payment/paymentSlice\";\nimport { actClearCarts } from \"../../redux/features/cart/cartSlice\";\nimport { formatNumber } from \"../../utils/formatNumber\";\n\nconst phoneValidation = /(84|0[3|5|7|8|9])+([0-9]{8})\\b/;\nconst emailValidation =\n  /^[a-z][a-z0-9_.]{5,32}@[a-z0-9]{2,}(.[a-z0-9]{2,4}){1,2}$/;\nconst schema = Yup.object().shape({\n  fullName: Yup.string().required(\"Please input your full name\"),\n  address: Yup.string().required(\"Please input street address\"),\n  phoneNumber: Yup.string()\n    .required(\"Please input your phone number\")\n    .matches(phoneValidation, \"type phone number was wrong\"),\n  email: Yup.string()\n    .required(\"Please input your email\")\n    .matches(emailValidation, \"type email was wrong\"),\n  feeShip: Yup.string().required(\"Please choose method shipping\"),\n  payment: Yup.string().required(\"Please choose method shipping\"),\n});\n\nconst OrderPage = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const { userInfo } = useSelector((state) => state.user);\n  const { carts } = useSelector((state) => state.cart);\n\n  const methods = useForm({\n    defaultValues: {\n      fullName: \"\",\n      address: \"\",\n      phoneNumber: \"\",\n      email: \"\",\n      orderNotes: \"\",\n      feeShip: \"\",\n      payment: \"\",\n    },\n    resolver: yupResolver(schema),\n  });\n\n  const {\n    handleSubmit,\n    control,\n    formState: { errors },\n    reset,\n  } = methods;\n\n  const onValid = (formValue) => {\n    const _totalMoney = carts.reduce((total, cart) => {\n      return total + parseFloat(cart.price) * parseFloat(cart.quantity);\n    }, 0);\n\n    const orderData = {\n      ...formValue,\n      userId: userInfo.id,\n      carts: carts,\n      dateOfBill: dayjs(new Date()).format(\"DD/MM/YYYY\"),\n      createAt: new Date().getTime(),\n      orderNumber: makeOrderNumber(),\n      totalMoney: formatNumber(_totalMoney),\n    };\n    dispatch(actAddOrder(orderData));\n    dispatch(actAddBill(orderData));\n    dispatch(clearOrder());\n    navigate(ROUTES.PAYMENT_PAGE);\n    dispatch(actClearCarts())\n  };\n\n  return (\n    <form className=\"order-page-container\" onSubmit={handleSubmit(onValid)}>\n      <Row className=\"order-page\">\n        <Col\n          className=\"order-page__billing-details\"\n          xs={24}\n          sm={24}\n          md={12}\n          lg={14}\n        >\n          <BillingDetails control={control} errors={errors} reset={reset} />\n        </Col>\n        <Col className=\"order-page__your-order\" xs={24} sm={24} md={12} lg={10}>\n          <YourOrder control={control} errors={errors} />\n          <div className=\"billing-detail__submit-btn\">\n            <Button htmlType=\"submit\">Thanh to√°n</Button>\n          </div>\n        </Col>\n      </Row>\n    </form>\n  );\n};\n\nexport default OrderPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}